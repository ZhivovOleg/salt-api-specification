# PATCH
Добавление или изменение полей в существующем объекте. Оптимально для операций изменения целых коллекций.

## CRUD:
`Update/Modify`

## Аргументы

- `id` объекта передается в строке URL
- любые другие аргументы **ДОЛЖНЫ(MUST)** передаваться в теле [json документа](./../document/document.md)

## Ответы

### Успешно:

#### Запрос коллекции:

`/customers`:
- `Code`: 200 (Ok)

> метод изменяет *ВСЮ* коллекцию!
аналогично sql `UPDATE` без выражения `WHERE`, поэтому в большинстве случаев метод заблокирован и должен возвращать ошибку `405 (Method Not Allowed)`
      
#### Запрос объекта:

`/customers/{id}`:
- `Code`: 200 (Ok)
- `Body`: [Ссылка на измененный объект](./../document/links.md).

### Ошибки

#### Неверный payload
в частности, переданы неверные атрибуты или типы атрибутов

- `Code`: 400 (Bad Request)
- `Body`: [Объект ошибки](./../document/errors.md)

#### Объект с таким ID не найден
- `Code`: 404 (Not Found)
- `Body`: [Объект ошибки](./../document/errors.md)

## Подробно

Обычно используется для контролируемого обновления коллекций.
**PATCH** используется для **изменения** возможностей. Запрос **PATCH** должен содержать только изменения ресурса, а не весь ресурс. Это похоже на **PUT**, но тело содержит набор инструкций, описывающих, как ресурс, в настоящее время находящийся на сервере, должен быть изменен для создания новой версии. Это означает, что тело **PATCH** должно быть не просто измененной частью ресурса, а [языком исправления](https://datatracker.ietf.org/doc/html/rfc6902). **PATCH** не является ни безопасным, ни идемпотентным. Однако запрос **PATCH** может быть выполнен таким образом, чтобы он был идемпотентным, что также помогает предотвратить неблагоприятные результаты из-за коллизий между двумя запросами **PATCH** на одном и том же ресурсе в одинаковый период времени. Коллизии от нескольких запросов **PATCH** могут быть более опасными, чем коллизии **PUT**, потому что некоторые форматы исправлений должны работать с известной базовой точкой, иначе они повредят ресурс.

## Примеры PATCH

[Пример изменения объекта](./../examples/patch.md)

## Статьи на русском

[На Хабре](https://habr.com/ru/post/531950/)

---

НАЗАД <- [Соглашения об использовании HTTP методов](./verbs.md)